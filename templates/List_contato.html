<!DOCTYPE html>
<!-- Diz que essa página é moderna (HTML5) -->

<html lang="pt-br">
<!-- A página está em português do Brasil -->

<head>
  <meta charset="UTF-8" />
  <!-- Garante que acentos e caracteres especiais aparecem certinho -->

  <title>Lista de Contatos</title>
  <!-- O nome que aparece na aba do navegador -->

  <link rel="stylesheet" href="{{ url_for('static', filename='contatos.css') }}">
  <!-- Pega um arquivo de estilos para deixar a página mais bonita -->

  <style>
  </style>
  <!-- Espaço para colocar estilos direto aqui, mas está vazio -->
</head>
<body>
  <!-- Aqui começa o que aparece de verdade na tela -->

  <nav class="navbar">
    <!-- Menu de navegação, tipo aqueles botões para ir para outras páginas -->
    <ul>
      <li><a href="/">Sobre</a></li>
      <!-- Vai para a página "Sobre" -->
      <li><a href="/adicionar_cont">Adicionar Contatos</a></li>
      <!-- Vai para a página de adicionar contatos -->
      <li><a href="/arquivos">Enviar Arquivo</a></li>
      <!-- Vai para a página de enviar arquivos -->
      <li><a href="/List">Lista de Contatos</a></li>
      <!-- Vai para a lista de contatos -->
    </ul>
  </nav>

  <div class="container">
    <!-- Um quadrado para colocar o conteúdo principal -->
    <h2>Lista de Contatos</h2>
    <!-- Título da página -->

    <ul class="contatos" id="listaContatos">
      <!-- Aqui vai aparecer a lista de contatos, que o JavaScript vai colocar -->
    </ul>
    <button id="enviar" type="button" class="btn btn-outline-primary">Enviar Mensagens</button>
    <!-- Botão para enviar mensagens para os contatos selecionados -->
  </div>

  <script>
    // Aqui está a lista de contatos, cada um com nome, número e mensagem
    const contatos = [
      { nome: 'João Silva', numero: '5511999999999', mensagem: 'Oi João, tudo bem?' },
      { nome: 'Maria Oliveira', numero: '5511988888888', mensagem: 'Olá Maria, mensagem automática!' },
      { nome: 'Carlos Pereira', numero: '5511977777777', mensagem: 'Fala Carlos, essa é uma mensagem teste.' },
      { nome: 'Ana Santos', numero: '5511966666666', mensagem: 'Oi Ana, como está?' },
      { nome: 'Fernanda Costa', numero: '5511955555555', mensagem: 'Olá Fernanda, tudo certo?' },
      { nome: 'Roberto Almeida', numero: '5511944444444', mensagem: 'Oi Roberto, mensagem de teste.' },
      { nome: 'Patrícia Lima', numero: '5511933333333', mensagem: 'Olá Patrícia, tudo bem?' },
      { nome: 'Lucas Martins', numero: '5511922222222', mensagem: 'Fala Lucas, como vai?' },
      { nome: 'Juliana Rocha', numero: '5511911111111', mensagem: 'Oi Juliana, tudo tranquilo?' },
      { nome: 'Ricardo Souza', numero: '5511900000000', mensagem: 'Olá Ricardo, mensagem automática!' }
    ];

    // Pega a lista onde os contatos vão aparecer e o botão de enviar
    const listaContatos = document.getElementById('listaContatos');
    const btnEnviar = document.getElementById('enviar');

    // Função que monta a lista de contatos na tela, cada um com uma caixinha de seleção
    function renderContatos() {
      listaContatos.innerHTML = '';
      contatos.forEach((contato, index) => {
        const li = document.createElement('li');

        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.id = `contato-${index}`;
        checkbox.dataset.index = index;

        checkbox.addEventListener('change', atualizarBotao);

        const label = document.createElement('label');
        label.htmlFor = `contato-${index}`;
        label.className = 'contato-info';
        label.innerHTML = `<strong>${contato.nome}</strong><small>${contato.numero}</small><small>${contato.mensagem}</small>`;

        li.appendChild(checkbox);
        li.appendChild(label);
        listaContatos.appendChild(li);
      });
    }

    // Ativa ou desativa o botão de enviar dependendo se alguém foi selecionado
    function atualizarBotao() {
      const selecionados = document.querySelectorAll('input[type=checkbox]:checked');
      btnEnviar.disabled = selecionados.length === 0;
    }

    // Quando clicar no botão, mostra um alerta dizendo para quem as mensagens seriam enviadas
    btnEnviar.addEventListener('click', () => {
      const selecionados = document.querySelectorAll('input[type=checkbox]:checked');
      const enviados = [];
      selecionados.forEach(input => {
        const contato = contatos[input.dataset.index];
        enviados.push(`${contato.nome} (${contato.numero}): ${contato.mensagem}`);
      });
      alert('Enviando mensagens para:\n\n' + enviados.join('\n\n'));
    });

    // Chama a função para mostrar os contatos na tela
    renderContatos();
  </script>
</body>
</html>
